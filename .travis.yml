sudo: required

language: python
python:
  - '3.6'

services:
  - docker

script:
  - docker build -t pangeo-notebook:${TRAVIS_COMMIT:0:8} .

before_deploy:
  - pip install awscli

deploy:
  - provider: script
    skip_cleanup: true
    script: bash $TRAVIS_BUILD_DIR/deploy.sh
    on:
      branch: master
  - provider: script
    skip_cleanup: true
    script: bash $TRAVIS_BUILD_DIR/deploy.sh
    on:
      tags: true
